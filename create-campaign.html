<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Create Campaign | Boost Social</title>

<style>
body{
  margin:0;font-family:Segoe UI,Tahoma,sans-serif;
  background:#f5f7fb;
  display:flex;justify-content:center;align-items:center;
  min-height:100vh
}
.card{
  background:#fff;padding:30px;
  width:420px;border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.1)
}
h2{text-align:center;margin-bottom:10px}
input,select{
  width:100%;padding:12px;margin:10px 0;
  border-radius:10px;border:1px solid #c7cbe0
}
button{
  width:100%;padding:12px;margin-top:10px;
  border:none;border-radius:30px;
  background:linear-gradient(135deg,#4f46e5,#9333ea);
  color:#fff;font-weight:600;cursor:pointer
}
.msg{text-align:center;margin-top:10px;font-size:14px}
</style>
</head>

<body>

<div class="card">
  <h2>Create Campaign</h2>

  <select id="platform">
    <option value="">Select Platform</option>
    <option value="YouTube">YouTube</option>
    <option value="TikTok">TikTok</option>
    <option value="Facebook">Facebook</option>
  </select>

  <input type="text" id="socialLink" placeholder="Your social media link">

  <select id="campaignType">
    <option value="">Campaign Type</option>
    <option value="Follow">Follow</option>
    <option value="Subscribe">Subscribe</option>
    <option value="Like">Like</option>
  </select>

  <select id="screenshot">
    <option value="yes">Screenshot Required</option>
    <option value="no">No Screenshot</option>
  </select>

  <button onclick="createCampaign()">Create Campaign</button>

  <div class="msg" id="msg"></div>
</div>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getAuth,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ðŸ”¥ YOUR FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  let currentUser = null;

  // ðŸ” AUTH GUARD
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }
    currentUser = user;
  });

  const msg = document.getElementById("msg");

  // ðŸš€ CREATE CAMPAIGN
  window.createCampaign = async function () {
    const platform = document.getElementById("platform").value;
    const socialLink = document.getElementById("socialLink").value;
    const campaignType = document.getElementById("campaignType").value;
    const screenshot = document.getElementById("screenshot").value;

    if (!platform || !socialLink || !campaignType) {
      msg.style.color = "red";
      msg.innerText = "Please fill all fields";
      return;
    }

    try {
      await addDoc(collection(db, "campaigns"), {
        platform,
        socialLink,
        campaignType,
        screenshotRequired: screenshot === "yes",
        createdByUID: currentUser.uid,
        createdByEmail: currentUser.email,
        createdAt: serverTimestamp()
      });

      msg.style.color = "green";
      msg.innerText = "Campaign created successfully!";

      document.getElementById("socialLink").value = "";

    } catch (err) {
      msg.style.color = "red";
      msg.innerText = err.message;
    }
  };
</script>

</body>
</html>
